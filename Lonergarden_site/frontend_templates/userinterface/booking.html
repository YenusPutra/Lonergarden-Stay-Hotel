{% load static %} {% load i18n %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>{% trans "Booking - Lonergarden Stay" %}</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="{% static 'img/favicon.png' %}" rel="icon">
  <link href="{% static 'img/apple-touch-icon.png' %}" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Josefin+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/aos/aos.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="{% static 'css/main.css' %}" rel="stylesheet">


</head>
<body class="booking-page">

  <header id="header" class="header sticky-top">

    <div class="topbar d-flex align-items-center dark-background">
      <div class="container d-flex justify-content-center justify-content-md-between">
        <div class="contact-info d-flex align-items-center">
          <i class="bi bi-envelope d-flex align-items-center"><a href="mailto:contact@example.com">{% trans "contact@example.com" %}</a></i>
          <i class="bi bi-phone d-flex align-items-center ms-4"><span>{% trans "+1 5589 55488 55" %}</span></i>
        </div>
        <div class="social-links d-none d-md-flex align-items-center">
          <a href="#" class="twitter"><i class="bi bi-twitter-x"></i></a>
          <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
          <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
          <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></a>
        </div>
      </div>
    </div><!-- End Top Bar -->

    <div class="branding d-flex align-items-cente">

      <div class="container position-relative d-flex align-items-center justify-content-between">
        <a href="{% url 'render-page' page='index' %}" class="logo d-flex align-items-center">
          <!-- Uncomment the line below if you also wish to use an image logo -->
          <!-- <img src="{% static 'img/logo.webp' %}" alt=""> -->
          <h1 class="sitename">{% trans "Lonergarden" %}</h1>
        </a>

        <nav id="navmenu" class="navmenu">
          <ul>
            <li><a href="{% url 'render-page' page='index' %}">{% trans "Home" %}</a></li>
            <li><a href="{% url 'render-page' page='about' %}">{% trans "About" %}</a></li>
            <li><a href="{% url 'render-page' page='rooms' %}">{% trans "Rooms" %}</a></li>
            <li><a href="{% url 'render-page' page='amenities' %}">{% trans "Amenities" %}</a></li>
            <li><a href="{% url 'render-page' page='location' %}">{% trans "Location" %}</a></li>
            <li class="dropdown"><a href="#"><span>{% trans "Pages" %}</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
              <ul>
                <li><a href="{% url 'render-page' page='room-details' %}">{% trans "Room Details" %}</a></li>
                <li><a href="{% url 'render-page' page='restaurant' %}">{% trans "Restaurant" %}</a></li>
                <li><a href="{% url 'render-page' page='offers' %}">{% trans "Offers" %}</a></li>
                <li><a href="{% url 'render-page' page='events' %}">{% trans "Events" %}</a></li>
                <li><a href="{% url 'render-page' page='gallery' %}">{% trans "Gallery" %}</a></li>
                <li><a href="{% url 'render-page' page='booking' %}" class="active">{% trans "Booking" %}</a></li>
                <li><a href="{% url 'render-page' page='terms' %}">{% trans "Terms Page" %}</a></li>
                <li><a href="{% url 'render-page' page='privacy' %}">{% trans "Privacy Page" %}</a></li>
                <li><a href="{% url 'render-page' page='404' %}">{% trans "404 Page" %}</a></li>
                <li><a href="{% url 'render-page' page='starter-page' %}">{% trans "Starter Page" %}</a></li>
              </ul>
            </li>
            <li><a href="{% url 'render-page' page='contact' %}">{% trans "Contact" %}</a></li>

            {% include "userinterface/language.html" %}

          </ul>
          <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
        </nav>

      </div>

    </div>

  </header>

  <main class="main">

    <!-- Page Title -->
    <div class="page-title light-background">
      <div class="container d-lg-flex justify-content-between align-items-center">
        <h1 class="mb-2 mb-lg-0">{% trans "Booking" %}</h1>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="{% url 'render-page' page='index' %}">{% trans "Home" %}</a></li>
            <li class="current">{% trans "Booking" %}</li>
          </ol>
        </nav>
      </div>
    </div>
    <!-- End Page Title -->

    <!-- Booking Section -->
    <section id="booking" class="booking section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="reservation-wrapper">

          <div class="reservation-header text-center" data-aos="fade-up" data-aos-delay="200">
            <h2>{% trans "Reserve Your Stay" %}</h2>
            <p class="lead">{% trans "Experience unmatched hospitality with our streamlined booking process" %}</p>
          </div>

          <div class="booking-grid">

            <div class="booking-form-section" data-aos="fade-right" data-aos-delay="300">
              <div class="form-container">
                <form class="reservation-form" id="reservation-form" method="POST">
                    {% csrf_token %}
                  <div class="form-section">
                    <h4>{% trans "Booking Details" %}</h4>
                    <div class="form-grid">
                      <div class="form-group">
                        <label for="arrival-date" class="form-label">{% trans "Arrival Date" %}</label>
                        <input type="date" class="form-control" id="arrival-date" name="arrival_date" required="">
                      </div>
                      <div class="form-group">
                        <label for="departure-date" class="form-label">{% trans "Departure Date" %}</label>
                        <input type="date" class="form-control" id="departure-date" name="departure_date" required="">
                      </div>
                      <div class="form-group">
                        <label for="guest-count" class="form-label">{% trans "Total Guests" %}</label>
                        <select class="form-select" id="guest-count" name="guest_count" required="">
                          <option value="">{% trans "Choose guests" %}</option>
                          <option value="1">{% trans "1 Guest" %}</option>
                          <option value="2">{% trans "2 Guests" %}</option>
                          <option value="3">{% trans "3 Guests" %}</option>
                          <option value="4">{% trans "4 Guests" %}</option>
                          <option value="5">{% trans "5+ Guests" %}</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label for="room-count" class="form-label">{% trans "Total Rooms" %}</label>
                        <select class="form-select" id="room-count" name="room_count" required="">
                          <option value="">{% trans "Choose rooms" %}</option>
                          <option value="1">{% trans "1 Room" %}</option>
                          <option value="2">{% trans "2 Rooms" %}</option>
                          <option value="3">{% trans "3 Rooms" %}</option>
                          <option value="4">{% trans "4+ Rooms" %}</option>
                        </select>
                      </div>
                    </div>
                  </div>

                  <div class="form-section">
                    <h4>{% trans "Room Preferences" %}</h4>
                    <div class="form-group">
                      <label for="accommodation-type" class="form-label">{% trans "Accommodation Type" %}</label>
                      <select class="form-select" id="accommodation-type" name="accommodation_type" required="">
                        <option value="">{% trans "No preference" %}</option>
                        <option value="Standard">{% trans "Standard City Room" %}</option>
                        <option value="Premium">{% trans "Premium Ocean View" %}</option>
                        <option value="Deluxe">{% trans "Deluxe Ocean Suite" %}</option>
                        <option value="Executive">{% trans "Executive Business Suite" %}</option>
                        <option value="Romantic">{% trans "Romantic Honeymoon Suite" %}</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="additional-notes" class="form-label">{% trans "Additional Requirements" %}</label>
                      <textarea class="form-control" id="additional-notes" name="additional_notes" rows="3" placeholder="Please specify any special arrangements or preferences..."></textarea>
                    </div>
                  </div>

                  <div class="form-section">
                    <h4>{% trans "Guest Information" %}</h4>
                    <div class="form-grid">
                      <div class="form-group full-width">
                        <label for="primary-guest" class="form-label">{% trans "Primary Guest Name" %}</label>
                        <input type="text" class="form-control" id="primary-guest" name="primary_guest" required="">
                      </div>
                      <div class="form-group">
                        <label for="contact-email" class="form-label">{% trans "Email Address" %}</label>
                        <input type="email" class="form-control" id="contact-email" name="contact_email" required="">
                      </div>
                      <div class="form-group">
                        <label for="contact-phone" class="form-label">{% trans "Contact Number" %}</label>
                        <input type="tel" class="form-control" id="contact-phone" name="contact_phone" required="">
                      </div>
                    </div>
                  </div>

                  <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                      <i class="bi bi-calendar-plus me-2"></i>{% trans "Submit Reservation Request" %}</button>
                  </div>

                </form>
              </div>
            </div>

            <div class="hotel-showcase" data-aos="fade-left" data-aos-delay="400">
              <div class="showcase-image">
                <img src="{% static 'img/hotel/showcase-1.webp' %}" alt="Hotel luxury showcase" class="img-fluid">
              </div>

              <div class="hotel-highlights">
                <h3>{% trans "Why Choose Our Hotel" %}</h3>
                <div class="highlights-grid">
                  <div class="highlight-item">
                    <div class="highlight-icon">
                      <i class="bi bi-wifi"></i>
                    </div>
                    <div class="highlight-content">
                      <h5>{% trans "Premium Connectivity" %}</h5>
                      <p>{% trans "High-speed internet access in all areas" %}</p>
                    </div>
                  </div>
                  <div class="highlight-item">
                    <div class="highlight-icon">
                      <i class="bi bi-clock"></i>
                    </div>
                    <div class="highlight-content">
                      <h5>{% trans "24/7 Service" %}</h5>
                      <p>{% trans "Round-the-clock assistance and support" %}</p>
                    </div>
                  </div>
                  <div class="highlight-item">
                    <div class="highlight-icon">
                      <i class="bi bi-car-front"></i>
                    </div>
                    <div class="highlight-content">
                      <h5>{% trans "Valet Parking" %}</h5>
                      <p>{% trans "Complimentary parking with valet service" %}</p>
                    </div>
                  </div>
                  <div class="highlight-item">
                    <div class="highlight-icon">
                      <i class="bi bi-heart-pulse"></i>
                    </div>
                    <div class="highlight-content">
                      <h5>{% trans "Wellness Center" %}</h5>
                      <p>{% trans "Full-service spa and fitness facilities" %}</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="booking-guarantees">
                <div class="guarantee-item">
                  <i class="bi bi-shield-check"></i>
                  <span>{% trans "Secure Booking" %}</span>
                </div>
                <div class="guarantee-item">
                  <i class="bi bi-arrow-clockwise"></i>
                  <span>{% trans "Flexible Cancellation" %}</span>
                </div>
                <div class="guarantee-item">
                  <i class="bi bi-telephone"></i>
                  <span>{% trans "24/7 Support" %}</span>
                </div>
              </div>
            </div>

          </div>

        </div>

      </div>

    </section>
    <!-- /Booking Section -->

  </main>

  <footer id="footer" class="footer position-relative dark-background">

    <div class="footer-top">
      <div class="container">
        <div class="row gy-4">
          <div class="col-lg-4 col-md-6 footer-about">
            <a href="{% url 'render-page' page='index' %}" class="logo d-flex align-items-center">
              <span class="sitename">{% trans "Lonergarden" %}</span>
            </a>
            <div class="footer-contact pt-3">
              <p>{% trans "A108 Adam Street" %}</p>
              <p>{% trans "New York, NY 535022" %}</p>
              <p class="mt-3"><strong>{% trans "Phone:" %}</strong> <span>{% trans "+1 5589 55488 55" %}</span></p>
              <p><strong>{% trans "Email:" %}</strong> <span>{% trans "info@example.com" %}</span></p>
            </div>
          </div>

          <div class="col-lg-2 col-md-3 footer-links">
            <h4>{% trans "Useful Links" %}</h4>
            <ul>
              <li><a href="#">{% trans "Home" %}</a></li>
              <li><a href="#">{% trans "About us" %}</a></li>
              <li><a href="#">{% trans "Services" %}</a></li>
              <li><a href="#">{% trans "Terms of service" %}</a></li>
              <li><a href="#">{% trans "Privacy policy" %}</a></li>
            </ul>
          </div>

          <div class="col-lg-2 col-md-3 footer-links">
            <h4>{% trans "Our Services" %}</h4>
            <ul>
              <li><a href="#">{% trans "Web Design" %}</a></li>
              <li><a href="#">{% trans "Web Development" %}</a></li>
              <li><a href="#">{% trans "Product Management" %}</a></li>
              <li><a href="#">{% trans "Marketing" %}</a></li>
              <li><a href="#">{% trans "Graphic Design" %}</a></li>
            </ul>
          </div>

          <div class="col-lg-2 col-md-3 footer-links">
            <h4>{% trans "Hic solutasetp" %}</h4>
            <ul>
              <li><a href="#">{% trans "Molestiae accusamus iure" %}</a></li>
              <li><a href="#">{% trans "Excepturi dignissimos" %}</a></li>
              <li><a href="#">{% trans "Suscipit distinctio" %}</a></li>
              <li><a href="#">{% trans "Dilecta" %}</a></li>
              <li><a href="#">{% trans "Sit quas consectetur" %}</a></li>
            </ul>
          </div>

          <div class="col-lg-2 col-md-3 footer-links">
            <h4>{% trans "Nobis illum" %}</h4>
            <ul>
              <li><a href="#">{% trans "Ipsam" %}</a></li>
              <li><a href="#">{% trans "Laudantium dolorum" %}</a></li>
              <li><a href="#">{% trans "Dinera" %}</a></li>
              <li><a href="#">{% trans "Trodelas" %}</a></li>
              <li><a href="#">{% trans "Flexo" %}</a></li>
            </ul>
          </div>

        </div>
      </div>
    </div>

    <div class="copyright text-center">
      <div class="container d-flex flex-column flex-lg-row justify-content-center justify-content-lg-between align-items-center">

        <div class="d-flex flex-column align-items-center align-items-lg-start">
          <div>{% trans "© Copyright" %}<strong><span>{% trans "MyWebsite" %}</span></strong>{% trans ". All Rights Reserved" %}</div>
          <div class="credits">
            <!-- All the links in the footer should remain intact. -->
            <!-- You can delete the links only if you purchased the pro version. -->
            <!-- Licensing information: https://bootstrapmade.com/license/ -->
            <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/herobiz-bootstrap-business-template/ -->{% trans "Designed by" %}<a href="https://bootstrapmade.com/">{% trans "BootstrapMade" %}</a>
          </div>
        </div>

        <div class="social-links order-first order-lg-last mb-3 mb-lg-0">
          <a href=""><i class="bi bi-twitter-x"></i></a>
          <a href=""><i class="bi bi-facebook"></i></a>
          <a href=""><i class="bi bi-instagram"></i></a>
          <a href=""><i class="bi bi-linkedin"></i></a>
        </div>

      </div>
    </div>

  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'vendor/php-email-form/validate.js' %}"></script>
  <script src="{% static 'vendor/aos/aos.js' %}"></script>
  <script src="{% static 'vendor/purecounter/purecounter_vanilla.js' %}"></script>
  <script src="{% static 'vendor/glightbox/js/glightbox.min.js' %}"></script>
  <script src="{% static 'vendor/swiper/swiper-bundle.min.js' %}"></script>
  <script src="{% static 'vendor/imagesloaded/imagesloaded.pkgd.min.js' %}"></script>
  <script src="{% static 'vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>

  <!-- Main JS File -->
  <script src="{% static 'js/main.js' %}"></script>

  <!-- refer to js/language-dropdown.js -->
  <script src="{% static 'js/language-dropdown.js' %}"></script>

  <script type="text/javascript"
        src="https://app.sandbox.midtrans.com/snap/snap.js"
        data-client-key="{{ client_key }}"></script>

  <script>
    document.getElementById("reservation-form").addEventListener("submit", async function(e) {
    e.preventDefault(); // stop normal form submission

    let formData = new FormData(this);

    // Send to your Django endpoint that returns snap_token
    let response = await fetch("{% url 'booking' %}", {
        method: "POST",
        body: formData,
        headers: {
            "X-CSRFToken": "{{ csrf_token }}",
            "X-Requested-With": "XMLHttpRequest"
        }
    });

    console.log(response);
    let data = await response.json();

    // Call Midtrans Snap popup
    snap.pay(data.snap_token, {
        onSuccess: function(result){
            alert("✅ Payment success!");
            console.log(result);
        },
        onPending: function(result){
            alert("⏳ Payment pending!");
            console.log(result);
        },
        onError: function(result){
            alert("❌ Payment failed!");
            console.log(result);
        },
        onClose: function(){
            alert("⚠️ You closed the popup without finishing payment");
        }
    });
});

console.log("snap.pay called with snap_token:", data.snap_token);
</script>

</body>

</html>