<script type="text/javascript"
    src="https://app.sandbox.midtrans.com/snap/snap.js"
    data-client-key="{{ client_key }}"></script>

<h1>Booking Confirmation and Payment</h1>
<p>Room: {{ booking.room.name }}</p>
<p>Total: {{ booking.total_price }}</p>

<button id="pay-button">Complete Payment</button>

<script type="text/javascript">
  document.getElementById('pay-button').onclick = function(){
    // SnapToken acquired from the server
    snap.pay('{{ snap_token }}', {
      onSuccess: function(result){
        /* You may want to redirect to a 'Success' page here */
        console.log('Payment success:', result);
        alert("Payment success!");
      },
      onPending: function(result){
        console.log('Payment pending:', result);
        alert("Waiting for payment!");
      },
      onError: function(result){
        console.log('Payment error:', result);
        alert("Payment failed!");
      },
      onClose: function(){
        /* You may want to redirect to a 'Back to Booking' page here */
        alert('You closed the payment popup without finishing the payment');
      }
    });
  };
</script>